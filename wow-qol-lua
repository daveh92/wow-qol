local addonName = "InviteHelper"
local addonVersion = "1.0"

local groupName = "TestGroup" -- The name of the group to create

function invitePlayer(event, playerName)
    if event == "CHAT_MSG_WHISPER" and string.match(playerName, "?inv") then
        -- Create a new group with the given name
        GameTooltip:SetOwner(WorldFrame, "ANCHOR_NONE")
        GameTooltip:AddLine("Creating group...")
        GameTooltip:Show()
        
        local group = CreateGroup(groupName)
        if not group then
            GameTooltip:SetText("Error creating group", 1, 0, 0)
        else
            GameTooltip:SetText("Created group " .. group.name .. " with ID " .. group.id, 0, 1, 0)
        end
        
        -- Invite the player to the created group
        local instance = GetInstanceInfo()
        if instance then
            local groupId = CreateGroup(instance.id, groupName)
            if not groupId then
                GameTooltip:SetText("Error inviting to group", 1, 0, 0)
            else
                GameTooltip:SetText("Invited player to group " .. groupName, 0, 1, 0)
            end
        end
    end
end

function Initialize(event, addonName)
    -- Register for chat messages
    ChatFrame_AddMessageEvent("CHAT_MSG_WHISPER", invitePlayer)
end

-- Register the addon with World of Warcraft
local addon = LibStub:NewAddOn(addonName, addonVersion, Initialize)